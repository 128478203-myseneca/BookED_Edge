{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>Filter Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'assets/css/filter.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">

  </head>
  <div class='fixed-top'>
    {% if messages %}
           {% for message in messages %}
             <div class="alert alert-{{ message.tags }} alert-dismissible">
               <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
               {{message}}
             </div>
           {% endfor %}
     {% endif %}
   </div>
   
   
   
     <header id="header" class="fixed-top">
       <div class="container d-flex align-items-center">
         <a href="/"><img src="{% static 'assets/img/BookED_Logo1.png' %}" alt="MainLogo" class="img-fluid" width="100" height="100"></a>
   
         <nav class="nav-menu d-none d-lg-block">
           <ul>
             <li class="active"><a href="/">Home</a></li>
             <li><a href="/market">Marketplace</a></li>
             <li><a href="#services">FAQs</a></li>
             <li><a href="#portfolio">Partners</a></li>
             <li><a href="#team">Team</a></li>
             <li><a href="#contact">Contact</a></li>
   
           </ul>
         </nav>
   
         {% if user.is_authenticated %}
         <a href="/logout" class="get-logout-btn scrollto">Logout</a>
         <a href="/profile" class="get-started-btn scrollto">Profile</a>
         {% else %}
         <a href="/login" class="get-started-btn scrollto">Login</a>
         <a href="/register" class="get-register-btn scrollto">Register</a>
         {% endif %}
         
   
       </div>
     </header>
  <body>
   

    <main role="main" class="container">
      
      <h3>Filter Books</h3>
      <form method="GET" action=".">
        <div class="form-row">
            <div class="form-group col-12">
                <div class="input-group">
                    <input class="form-control py-2 border-right-0 border" type="search" name="title_contains" placeholder="Title contains..." />
                    <span class="input-group-append">
                        <div class="input-group-text bg-transparent">
                            <i class="fa fa-search"></i>
                        </div>
                    </span>
                </div>
            </div>        
        </div>
        <div class="form-row">
            <div class="form-group col-12">
                <div class="input-group">
                    <input class="form-control py-2 border-right-0 border" type="search" name="id_exact" placeholder="ISBN code..." />
                    <span class="input-group-append">
                        <div class="input-group-text bg-transparent">
                            <i class="fa fa-search"></i>
                        </div>
                    </span>
                </div>
            </div>        
        </div>
        <div class="form-row">
         <div class="form-group col-md-4">
            <label for="category">School</label>
            <select id="category" class="form-control" name="schools">
                <option selected>Institution You are Engaged</option>
                {% for school in schools_all %}
                <option value="{{ school }}">{{ school }}</option>
                {% endfor %}
             </select>
        </div>
          <div class="form-group col-md-2 col-lg-2">
            <label for="viewCountMin">Semester</label>
            <input type="number" min=0 class="form-control" id="semester" placeholder='Leave blank of not sure...' name="semester">
          </div>
          <div class="form-group col-md-2 col-lg-2">
            <label for="publishDateMin">Publish date minimum</label>
            <input type="date" class="form-control" id="publishDateMin" name="date_min">
          </div>
          <div class="form-group col-md-2 col-lg-2">
            <label for="publishDateMax">Publish date maximum</label>
            <input type="date" class="form-control" id="publishDateMax" name="date_max">
          </div>
        </div>
        <div class="form-group">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="reviewed" name="sponsored">
            <label class="form-check-label" for="reviewed">
              Save More
            </label>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
      </form>

      <hr />
        <ul>
            {% for post in queryset %}
            <div class="container" id="market">
              <article class="media content-section">
                <img class="rounded-circle article-img" src="{{ post.author.profile.image.url }}">
                <div class="media-body">
                  <div class="article-metadata">
                    <a class="mr-2" href="{% url 'User-Posts' post.author.username %}">{{ post.author }}</a>
                    <small class="text-muted">{{ post.date_posted|date:"F d, Y" }}</small>
                  </div>
                  <h2 class="article-title"><a href="{% url 'Post-Detail' post.id %}">{{ post.title }}</a></h2>
                  <!-- <h5 class="article-content">School : {{  post.author.profile.school }}</h5> -->
                  <h5 class="article-content">School : {{  post.schools }}</h5>
                  <h5 class="article-content">Semester : {{  post.semester }}</h5>
                  <h5 class="article-content">ISBN Number : {{  post.isbn }}</h5>
                  <p class="article-content">{{ post.content|truncatewords:50 }}</p>
                </div>
              </article>
          </div>
          <br>
          {% endfor %}
        </ul>
  

    </main>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>

</html>